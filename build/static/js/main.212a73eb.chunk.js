(this["webpackJsonpreact-movies"]=this["webpackJsonpreact-movies"]||[]).push([[0],{145:function(e,t,n){e.exports={div:"IndividualMovie_div__m1ZgI"}},146:function(e,t,n){e.exports={div:"MoviesList_div__36X22"}},160:function(e,t,n){},161:function(e,t,n){},286:function(e,t,n){},289:function(e,t,n){},307:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(50),i=n.n(a),s=(n(160),n(4)),o=(n(161),n(10)),l=c.a.createContext({claims:[],update:function(){}}),u=n(0);function d(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useContext)(l).claims;return Object(r.useEffect)((function(){if(e.role){var t=i.findIndex((function(t){return"role"===t.name&&t.value===e.role}));a(t>-1)}else a(i.length>0)}),[i,e.role]),Object(u.jsx)(u.Fragment,{children:c?e.authorized:e.notAuthorized})}var j="token",b="token-expiration";function m(e){localStorage.setItem(j,e.token),localStorage.setItem(b,e.expiration.toString())}function h(){var e=localStorage.getItem(j);if(!e)return[];var t=localStorage.getItem(b);if(new Date(t)<=new Date)return p(),[];var n=JSON.parse(atob(e.split(".")[1])),r=[];for(var c in n)r.push({name:c,value:n[c]});return r}function p(){localStorage.removeItem(j),localStorage.removeItem(b)}function O(e){return Object(u.jsx)("button",{disabled:e.disabled,type:e.type,className:e.className,onClick:e.onClick,children:e.children})}function f(){var e=Object(r.useContext)(l),t=e.update,n=e.claims;return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(o.c,{to:"/",className:"navbar-brand",children:"React Movies"}),Object(u.jsxs)("div",{className:"collapse navbar-collapse",style:{display:"flex",justifyContent:"space-between"},children:[Object(u.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/movies/filter",className:"nav-link",children:"Filter Movies"})}),Object(u.jsx)(d,{role:"admin",authorized:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/genres",className:"nav-link",children:"Genres"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/actors",className:"nav-link",children:"Actors"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/movietheaters",className:"nav-link",children:"Movie Theaters"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/movies/create",className:"nav-link",children:"Create a Movie"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.c,{to:"/users",className:"nav-link",children:"Users"})})]})})]}),Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsx)(d,{authorized:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("span",{className:"nav-link",children:["Hello, ",function(){var e;return null===(e=n.filter((function(e){return"email"===e.name}))[0])||void 0===e?void 0:e.value}()]}),Object(u.jsx)(O,{onClick:function(){p(),t([])},className:"nav-link btn btn-link",children:"Logout"})]}),notAuthorized:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{className:"nav-link btn btn-link",to:"/register",children:"Register"}),Object(u.jsx)(o.b,{className:"nav-link btn btn-link",to:"/login",children:"Login"})]})})})]})]})})}O.defaultProps={type:"button",disabled:!1,className:"btn btn-primary"};var x=n(19),v=n(7),g=n(12),y=n(11),N=n.n(y),S="https://moviesapi20220831073913.azurewebsites.net/api",k="".concat(S,"/genres"),w="".concat(S,"/actors"),C="".concat(S,"/movietheaters"),T="".concat(S,"/movies"),F="".concat(S,"/accounts"),I="".concat(S,"/ratings");function A(e){return Object(u.jsx)(u.Fragment,{children:e.errors?Object(u.jsx)("ul",{style:{color:"red"},children:e.errors.map((function(e,t){return Object(u.jsx)("li",{children:e},t)}))}):null})}function P(e){var t=new FormData;return t.append("name",e.name),e.biography&&t.append("biography",e.biography),e.dateOfBirth&&t.append("dateOfBirth",D(e.dateOfBirth)),e.picture&&t.append("picture",e.picture),t}function R(e){var t=new FormData;return t.append("title",e.title),e.summary&&t.append("summary",e.summary),t.append("trailer",e.trailer),t.append("inTheaters",String(e.inTheaters)),e.releaseDate&&t.append("releaseDate",D(e.releaseDate)),e.poster&&t.append("poster",e.poster),t.append("genresIds",JSON.stringify(e.gernresIds)),t.append("movieTheatersIds",JSON.stringify(e.movieTheatersIds)),t.append("actors",JSON.stringify(e.actors)),t}function D(e){e=new Date(e);var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),n=Object(s.a)(t,5),r=n[0].value,c=n[2].value,a=n[4].value;return"".concat(a,"-").concat(r,"-").concat(c)}var U=n(16);function L(e){return Object(u.jsxs)("div",{className:"form-group mb-3",children:[Object(u.jsx)("label",{htmlFor:e.field,children:e.displayName}),Object(u.jsx)(U.b,{type:e.type,name:e.field,id:e.field,className:"form-control"}),Object(u.jsx)(U.a,{name:e.field,children:function(e){return Object(u.jsx)("div",{className:"text-danger",children:e})}})]})}L.defaultProps={type:"text"};var M=n(22);function E(e){var t,n=Object(U.e)(),r=n.values,c=n.validateForm,a=n.touched,i=n.errors;return Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{htmlFor:e.field,children:e.displayName}),Object(u.jsx)("input",{type:"date",className:"form-control",id:e.field,name:e.field,defaultValue:new Date(r[e.field]).toLocaleDateString("en-CA"),onChange:function(t){var n=new Date(t.currentTarget.value+"T00:00:00");r[e.field]=n,c()}}),a[e.field]&&i[e.field]?Object(u.jsx)("div",{className:"text-danger",children:null===(t=i[e.field])||void 0===t?void 0:t.toString()}):null]})}function B(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(e.imageURL),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(U.e)().values,b={marginTop:"10px"},m={width:"450px"};var h=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))};return Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{htmlFor:"",children:e.displayName}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:function(t){if(t.currentTarget.files){var n=t.currentTarget.files[0];n?(h(n).then((function(e){return a(e)})).catch((function(e){return console.error(Error)})),j[e.field]=n,d("")):a("")}}})}),c?Object(u.jsx)("div",{children:Object(u.jsx)("div",{style:b,children:Object(u.jsx)("img",{src:c,style:m,alt:"selected image"})})}):null,l?Object(u.jsx)("div",{children:Object(u.jsx)("div",{style:b,children:Object(u.jsx)("img",{src:l,style:m,alt:"selected image"})})}):null]})}B.defaultProps={imageURL:""};var V=n(320);n(286);function q(e){var t=Object(U.e)().values;return Object(u.jsxs)("div",{className:"mb-3 form-markdown",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"",children:e.displayName}),Object(u.jsx)("div",{children:Object(u.jsx)(U.b,{name:e.field,as:"textarea",className:"form-textarea"})})]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("label",{htmlFor:"",children:[e.displayName," (preview):"]}),Object(u.jsx)("div",{className:"markdown-container",children:Object(u.jsx)(V.a,{children:t[e.field]})})]})]})}function G(e){return Object(u.jsx)(U.d,{initialValues:e.model,onSubmit:e.onSubmit,validationSchema:M.c({name:M.d().required("This field is required").firstLetterUppercase(),dateOfBirth:M.b().nullable().required("This field is required")}),children:function(t){return Object(u.jsxs)(U.c,{children:[Object(u.jsx)(L,{displayName:"Name",field:"name"}),Object(u.jsx)(E,{displayName:"Date of Birth",field:"dateOfBirth"}),Object(u.jsx)(B,{displayName:"Picture",field:"picture",imageURL:e.model.pictureURL}),Object(u.jsx)(q,{displayName:"Biography",field:"biography"}),Object(u.jsx)(O,{disabled:t.isSubmitting,type:"submit",children:"Save Changes"}),Object(u.jsx)(o.b,{to:"/actors",className:"btn btn-secondary",children:"Cancel"})]})}})}function z(){return Object(u.jsx)("img",{src:"https://cdn.dribbble.com/users/107759/screenshots/2436386/copper-loader.gif",alt:""})}function J(e){var t=Object(x.i)().id,n=Object(r.useState)(),c=Object(s.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)([]),l=Object(s.a)(o,2),d=l[0],j=l[1],b=Object(x.g)();function m(){return(m=Object(g.a)(Object(v.a)().mark((function n(r){var c,a;return Object(v.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e.transformFormData){n.next=7;break}return c=e.transformFormData(r),n.next=5,N()({method:"put",url:"".concat(e.url,"/").concat(t),data:c,headers:{"Content-Type":"multipart/form-data"}});case 5:n.next=9;break;case 7:return n.next=9,N.a.put("".concat(e.url,"/").concat(t),r);case 9:b.push(e.indexURL),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),(a=n.t0).response&&j(a.response.data);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){N.a.get("".concat(e.url,"/").concat(t)).then((function(t){i(e.transform(t.data))}))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{children:["Edit ",e.entityName]}),Object(u.jsx)(A,{errors:d}),a?e.children(a,(function(e){return m.apply(this,arguments)})):Object(u.jsx)(z,{})]})}J.defaultProps={transform:function(e){return e}};var _=n(43),Y=n.n(_);function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure?",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Delete";Y.a.fire({title:t,confirmButtonText:n,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((function(t){t.isConfirmed&&e()}))}function X(e){return e.list?0===e.list.length?e.emptyListUI?e.emptyListUI:Object(u.jsx)(u.Fragment,{children:"There are no elements to display"}):e.children:e.loadingUI?e.loadingUI:Object(u.jsx)(z,{})}function H(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1];function i(e){return e.active?"active pointer":e.enabled?"pointer":"disabled"}return Object(r.useEffect)((function(){var t=1!==e.currentPage,n=e.currentPage-1,r=[];r.push({text:"Previous",enabled:t,page:n,active:!1});for(var c=1;c<=e.totalAmountOfPages;c++)c>=e.currentPage-e.radio&&c<=e.currentPage+e.radio&&r.push({text:"".concat(c),active:e.currentPage===c,enabled:!0,page:c});var i=e.currentPage!==e.totalAmountOfPages&&e.totalAmountOfPages>0,s=e.currentPage+1;r.push({text:"Next",page:s,enabled:i,active:!1}),a(r)}),[e.currentPage,e.totalAmountOfPages,e.radio]),Object(u.jsx)("nav",{children:Object(u.jsx)("ul",{className:"pagination justify-content-center",children:c.map((function(t){return Object(u.jsx)("li",{onClick:function(){return function(t){t.page!==e.currentPage&&t.enabled&&e.onChange(t.page)}(t)},className:"page-item cursor ".concat(i(t)),children:Object(u.jsx)("span",{className:"page-link",children:t.text})},t.text)}))})})}function W(e){return Object(u.jsxs)("div",{className:"mb-3",style:{width:"150px"},children:[Object(u.jsx)("label",{children:"Records per page:"}),Object(u.jsxs)("select",{className:"form-select",defaultValue:5,onChange:function(t){e.onChange(parseInt(t.currentTarget.value,10))},children:[Object(u.jsx)("option",{value:"5",children:"5"}),Object(u.jsx)("option",{value:"10",children:"10"}),Object(u.jsx)("option",{value:"20",children:"20"}),Object(u.jsx)("option",{value:"30",children:"30"})]})]})}function Z(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(0),l=Object(s.a)(i,2),d=l[0],j=l[1],b=Object(r.useState)(5),m=Object(s.a)(b,2),h=m[0],p=m[1],f=Object(r.useState)(1),x=Object(s.a)(f,2),y=x[0],S=x[1],k=Object(r.useState)([]),w=Object(s.a)(k,2),C=w[0],T=w[1];function F(){N.a.get(e.url,{params:{page:y,recordsPerPage:h}}).then((function(e){var t=parseInt(e.headers.totalamountofrecords,10);j(Math.ceil(t/h)),a(e.data)}))}function I(){return(I=Object(g.a)(Object(v.a)().mark((function t(n){var r;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.delete("".concat(e.url,"/").concat(n));case 3:F(),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),(r=t.t0).response&&T(r.response.data);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}Object(r.useEffect)((function(){F()}),[y,h]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:e.title}),e.createURL?Object(u.jsxs)(o.b,{to:e.createURL,className:"btn btn-primary",children:["Create ",e.entityName]}):null,Object(u.jsx)(W,{onChange:function(e){S(1),p(e)}}),Object(u.jsx)(H,{currentPage:y,totalAmountOfPages:d,onChange:function(e){return S(e)}}),Object(u.jsx)(A,{errors:C}),Object(u.jsx)(X,{list:c,children:Object(u.jsx)("table",{className:"table table-striped",children:e.children(c,(function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{className:"btn btn-success",to:e,children:"Edit"}),Object(u.jsx)(O,{className:"btn btn-danger",onClick:function(){K((function(){return function(e){return I.apply(this,arguments)}(t)}))},children:"Delete"})]})}))})})]})}function Q(e){return Object(u.jsx)(U.d,{initialValues:e.model,onSubmit:e.onSubmit,validationSchema:M.c({email:M.d().required("This field is required").email("You have to insert a valid email"),password:M.d().required("This field is required")}),children:function(e){return Object(u.jsxs)(U.c,{children:[Object(u.jsx)(L,{displayName:"Email",field:"email"}),Object(u.jsx)(L,{displayName:"Password",field:"password",type:"password"}),Object(u.jsx)(O,{disabled:e.isSubmitting,type:"submit",children:"Submit"}),Object(u.jsx)(o.b,{className:"btn btn-secondary",to:"/",children:"Cancel"})]})}})}function $(e){return Object(u.jsx)(U.d,{initialValues:e.model,validationSchema:M.c({name:M.d().required("This field is required").max(50,"Max lenght is 50 characters").firstLetterUppercase()}),onSubmit:e.onSubmit,children:function(e){return Object(u.jsxs)(U.c,{children:[Object(u.jsx)(L,{field:"name",displayName:"Name"}),Object(u.jsx)(O,{disabled:e.isSubmitting,type:"submit",children:"Save Changes"}),Object(u.jsx)(o.b,{className:"btn btn-secondary",to:"/genres",children:"Cancel"})]})}})}H.defaultProps={radio:3};var ee=n(8);function te(e){return Object(u.jsxs)("div",{className:"mb-3 form-check",children:[Object(u.jsx)(U.b,{className:"form-check-input",id:e.field,name:e.field,type:"checkbox"}),Object(u.jsx)("label",{htmlFor:e.field,children:e.displayName})]})}n(289);function ne(e){return Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{children:e.displayName}),Object(u.jsxs)("div",{className:"multiple-selector",children:[Object(u.jsx)("ul",{children:e.nonSelected.map((function(t){return Object(u.jsx)("li",{onClick:function(){return function(t){var n=[].concat(Object(ee.a)(e.selected),[t]),r=e.nonSelected.filter((function(e){return e!==t}));e.onChange(n,r)}(t)},children:t.value},t.key)}))}),Object(u.jsxs)("div",{className:"multiple-selector-buttons",children:[Object(u.jsx)("button",{type:"button",onClick:function(){var t=[].concat(Object(ee.a)(e.selected),Object(ee.a)(e.nonSelected));e.onChange(t,[])},children:">>"}),Object(u.jsx)("button",{type:"button",onClick:function(){var t=[].concat(Object(ee.a)(e.nonSelected),Object(ee.a)(e.selected));e.onChange([],t)},children:"<<"})]}),Object(u.jsx)("ul",{children:e.selected.map((function(t){return Object(u.jsx)("li",{onClick:function(){return function(t){var n=[].concat(Object(ee.a)(e.nonSelected),[t]),r=e.selected.filter((function(e){return e!==t}));e.onChange(r,n)}(t)},children:t.value},t.key)}))})]})]})}var re=n(151);function ce(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(void 0),b=Object(s.a)(j,2),m=b[0],h=b[1];return Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{htmlFor:"",children:e.displayName}),Object(u.jsx)(re.a,{id:"typeahead",onChange:function(t){-1===e.actors.findIndex((function(e){return e.id===t[0].id}))&&(t[0].character="",e.onAdd([].concat(Object(ee.a)(e.actors),[t[0]])))},options:c,labelKey:function(e){return e.name},filterBy:function(){return!0},isLoading:l,onSearch:function(e){d(!0),N.a.get("".concat(w,"/searchByName/").concat(e)).then((function(e){a(e.data),d(!1)}))},placeholder:"Write the name of actor...",minLength:1,flip:!0,selected:[],renderMenuItemChildren:function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{alt:"actor",src:e.picture,style:{height:"64px",marginRight:"10px",width:"64px"}}),Object(u.jsx)("span",{children:e.name})]})}}),Object(u.jsx)("ul",{className:"list-group",children:e.actors.map((function(t){return Object(u.jsxs)("li",{draggable:!0,onDragStart:function(){!function(e){h(e)}(t)},onDragOver:function(){!function(t){if(m&&t.id!==m.id){var n=e.actors.findIndex((function(e){return e.id===m.id})),r=e.actors.findIndex((function(e){return e.id===t.id})),c=Object(ee.a)(e.actors);c[r]=m,c[n]=t,e.onAdd(c)}}(t)},className:"list-group-item list-group-item-action",children:[e.listUI(t),Object(u.jsx)("span",{className:"badge badge-primary badge-pill pointer text-dark",style:{marginLeft:"0.5rem"},onClick:function(){e.onRemove(t)},children:"X"})]},t.id)}))})]})}function ae(e){var t=Object(r.useState)(w(e.selectedGenres)),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(w(e.nonSelectedGenres)),l=Object(s.a)(i,2),d=l[0],j=l[1],b=Object(r.useState)(w(e.selectedMovieTheaters)),m=Object(s.a)(b,2),h=m[0],p=m[1],f=Object(r.useState)(w(e.nonSelectedMovieTheaters)),x=Object(s.a)(f,2),v=x[0],g=x[1],y=Object(r.useState)(e.selectedActors),N=Object(s.a)(y,2),S=N[0],k=N[1];function w(e){return e.map((function(e){return{key:e.id,value:e.name}}))}return Object(u.jsx)(U.d,{initialValues:e.model,onSubmit:function(t,n){t.gernresIds=c.map((function(e){return e.key})),t.movieTheatersIds=h.map((function(e){return e.key})),t.actors=S,e.onSubmit(t,n)},validationSchema:M.c({title:M.d().required("This field is required").max(50,"Max lenght is 50 characters").firstLetterUppercase()}),children:function(t){return Object(u.jsxs)(U.c,{children:[Object(u.jsx)(L,{displayName:"Title",field:"title"}),Object(u.jsx)(te,{displayName:"In Theaters",field:"inTheaters"}),Object(u.jsx)(L,{displayName:"Trailter",field:"trailer"}),Object(u.jsx)(E,{displayName:"Release Date",field:"releaseDate"}),Object(u.jsx)(B,{displayName:"Poster",field:"poster",imageURL:e.model.posterURL}),Object(u.jsx)(q,{displayName:"Summary",field:"summary"}),Object(u.jsx)(ne,{displayName:"Genres",nonSelected:d,selected:c,onChange:function(e,t){a(e),j(t)}}),Object(u.jsx)(ne,{displayName:"In Theaters",nonSelected:v,selected:h,onChange:function(e,t){p(e),g(t)}}),Object(u.jsx)(ce,{displayName:"Actors",actors:S,onAdd:function(e){k(e)},onRemove:function(e){var t=S.filter((function(t){return t!==e}));k(t)},listUI:function(e){return Object(u.jsxs)(u.Fragment,{children:[e.name," /"," ",Object(u.jsx)("input",{type:"text",placeholder:"Character",value:e.character,onChange:function(t){var n=S.findIndex((function(t){return t.id===e.id})),r=Object(ee.a)(S);r[n].character=t.currentTarget.value,k(r)}})]})}}),Object(u.jsx)(O,{disabled:t.isSubmitting,type:"submit",children:"Save Changes"}),Object(u.jsx)(o.b,{className:"btn btn-secondary",to:"/genres",children:"Cancel"})]})}})}var ie=n(18),se=n(145),oe=n.n(se),le=c.a.createContext((function(){}));function ue(e){var t=function(){return"/movie/".concat(e.id)},n=Object(r.useContext)(le);return Object(u.jsxs)("div",{className:oe.a.div,children:[Object(u.jsx)(o.b,{to:t(),children:Object(u.jsx)("img",{src:e.poster,alt:"Poster"})}),Object(u.jsx)("p",{children:Object(u.jsx)(o.b,{to:t(),children:e.title})}),Object(u.jsx)(d,{role:"admin",authorized:Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)(o.b,{style:{marginRight:"1rem"},className:"btn btn-info",to:"/movies/edit/".concat(e.id),children:"Edit"}),Object(u.jsx)(O,{onClick:function(){K((function(){N.a.delete("".concat(T,"/").concat(e.id)).then((function(){n()}))}))},className:"btn btn-danger",children:"Delete"})]})})})]})}var de=n(146),je=n.n(de);function be(e){var t;return Object(u.jsx)(X,{list:e.movies,children:Object(u.jsx)("div",{className:je.a.div,children:null===(t=e.movies)||void 0===t?void 0:t.map((function(e){return Object(r.createElement)(ue,Object(ie.a)(Object(ie.a)({},e),{},{key:e.id}))}))})})}var me=n(316),he=n(321),pe=n(317),Oe=n(318),fe=n(319),xe=n(33),ve=n.n(xe),ge=n(147),ye=n(148),Ne=(n(306),ve.a.icon({iconUrl:ge.a,shadowUrl:ye.a,iconAnchor:[16,37]}));function Se(e){var t=Object(r.useState)(e.coordinates),n=Object(s.a)(t,2),c=n[0],a=n[1];return Object(u.jsxs)(me.a,{center:[10.042880099928833,105.76653169072291],style:{height:e.height},zoom:14,children:[Object(u.jsx)(he.a,{attribution:"React Movies",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.readOnly?null:Object(u.jsx)(ke,{setCoordinates:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){a([t]),e.handleMapClick(t)}))}),c.map((function(e,t){return Object(u.jsx)(pe.a,{position:[e.lat,e.lng],children:e.name?Object(u.jsx)(Oe.a,{children:e.name}):null},t)}))]})}function ke(e){return Object(fe.a)("click",(function(t){e.setCoordinates({lat:t.latlng.lat,lng:t.latlng.lng})})),null}ve.a.Marker.prototype.options.icon=Ne,Se.defaultProps={height:"500px",handleMapClick:function(){},readOnly:!1};var we=n(149);n(307);function Ce(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(e.selectedValue),o=Object(s.a)(i,2),d=o[0],j=o[1],b=Object(r.useContext)(l).claims;return Object(r.useEffect)((function(){a(Array(e.maximumValue).fill(0))}),[e.maximumValue]),Object(u.jsx)(u.Fragment,{children:c.map((function(t,n){return Object(u.jsx)(we.a,{icon:"star",className:"fa-lg pointer ".concat(d>=n+1?"checked":null),onMouseOver:function(){j(n+1)},onClick:function(){return t=n+1,void(b.length>0?(j(t),e.onChange(t)):Y.a.fire({title:"Error",text:"You need to login",icon:"error"}));var t}},n)}))})}function Te(e){var t=Object(U.e)().values;return Object(u.jsx)(Se,{coordinates:e.coordinates,handleMapClick:function(n){t[e.latField]=n.lat,t[e.lngField]=n.lng},readOnly:!1})}function Fe(e){function t(){if(e.model.latitude&&e.model.longitude)return[{lat:e.model.latitude,lng:e.model.longitude}]}return Object(u.jsx)(U.d,{initialValues:e.model,onSubmit:e.onSubmit,validationSchema:M.c({name:M.d().required("This field is required").firstLetterUppercase()}),children:function(e){return Object(u.jsxs)(U.c,{children:[Object(u.jsx)(L,{displayName:"Name",field:"name"}),Object(u.jsx)("div",{style:{marginBottom:"1rem"},children:Object(u.jsx)(Te,{latField:"latitude",lngField:"longitude",coordinates:t()})}),Object(u.jsx)(O,{disabled:e.isSubmitting,type:"submit",children:"Save Changes"}),Object(u.jsx)(o.b,{className:"btn btn-secondary",to:"/movietheaters",children:"Cancel"})]})}})}Te.defaultProps={coordinates:[]};var Ie=[{path:"/genres",component:function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Z,{url:k,createURL:"genres/create",title:"Genres",entityName:"Genre",children:function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{})]})}),Object(u.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:t("genres/edit/".concat(e.id),e.id)})]},e.id)}))})]})}})})},exact:!0,isAdmin:!0},{path:"/genres/create",component:function(){var e=Object(x.g)(),t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1];function i(e){return o.apply(this,arguments)}function o(){return(o=Object(g.a)(Object(v.a)().mark((function t(n){var r;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post(k,n);case 3:e.push("/genres"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),(r=t.t0).response&&a(r.response.data);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Create Genre"}),Object(u.jsx)(A,{errors:c}),Object(u.jsx)($,{model:{name:""},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},isAdmin:!0},{path:"/genres/edit/:id(\\d+)",component:function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(J,{url:k,entityName:"Genres",indexURL:"/genres",children:function(e,t){return Object(u.jsx)($,{model:e,onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(n){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}})})},isAdmin:!0},{path:"/actors",component:function(){return Object(u.jsx)(Z,{url:w,createURL:"actors/create",title:"Actors",entityName:"Actor",children:function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{})]})}),Object(u.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t("actors/edit/".concat(e.id),e.id)}),Object(u.jsx)("td",{children:e.name})]},e.id)}))})]})}})},exact:!0,isAdmin:!0},{path:"/actors/create",component:function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(x.g)();function i(e){return o.apply(this,arguments)}function o(){return(o=Object(g.a)(Object(v.a)().mark((function e(t){var n,r;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=P(t),N()({method:"post",url:w,data:n,headers:{"Content-Type":"multipart/form-data"}}),a.push("/actors")}catch(i){(r=i).response&&c(r.response.data)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Create Actor"}),Object(u.jsx)(A,{errors:n}),Object(u.jsx)(G,{model:{name:"",dateOfBirth:void 0},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},isAdmin:!0},{path:"/actors/edit/:id(\\d+)",component:function(){return Object(u.jsx)(J,{url:w,indexURL:"/actors",entityName:"Actor",transformFormData:P,transform:function(e){return{name:e.name,pictureURL:e.picture,biography:e.biography,dateOfBirth:e.dateOfBirth}},children:function(e,t){return Object(u.jsx)(G,{model:e,onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(n){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}})},isAdmin:!0},{path:"/movietheaters",component:function(){return Object(u.jsx)(Z,{url:C,createURL:"movietheaters/create",title:"Movie Theaters",entityName:"Movie Theater",children:function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"Name"})]})}),Object(u.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t("movietheaters/edit/".concat(e.id),e.id)}),Object(u.jsx)("td",{children:e.name})]},e.id)}))})]})}})},exact:!0,isAdmin:!0},{path:"/movietheaters/create",component:function(){var e=Object(x.g)(),t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1];function i(e){return o.apply(this,arguments)}function o(){return(o=Object(g.a)(Object(v.a)().mark((function t(n){var r;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post(C,n);case 3:e.push("/movietheaters"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),(r=t.t0).response&&a(r.response.data);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Create Movie Theater"}),Object(u.jsx)(A,{errors:c}),Object(u.jsx)(Fe,{model:{name:""},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},isAdmin:!0},{path:"/movietheaters/edit/:id(\\d+)",component:function(){return Object(u.jsx)(J,{url:C,indexURL:"/movietheaters",entityName:"Movie Theater",children:function(e,t){return Object(u.jsx)(Fe,{model:e,onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(n){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}})},isAdmin:!0},{path:"/movies/filter",component:function(){var e={title:"",genreId:0,upcommingReleases:!1,inTheaters:!1,page:1,recordsPerPage:10},t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(x.g)(),b=new URLSearchParams(Object(x.h)().search),m=Object(r.useState)(0),h=Object(s.a)(m,2),p=h[0],f=h[1];function y(e){!function(e){var t=[];e.title&&t.push("title=".concat(e.title));0!==e.genreId&&t.push("genreId=".concat(e.genreId));e.upcommingReleases&&t.push("upcommingReleases=".concat(e.upcommingReleases));e.inTheaters&&t.push("inTheaters=".concat(e.inTheaters));t.push("page=".concat(e.page)),j.push("/movies/filter?".concat(t.join("&")))}(e),N.a.get("".concat(T,"/filter"),{params:e}).then((function(t){var n=parseInt(t.headers.totalamountofrecords,10);f(Math.ceil(n/e.recordsPerPage)),d(t.data)}))}return Object(r.useEffect)((function(){N.a.get("".concat(k,"/all")).then((function(e){a(e.data)}))}),[]),Object(r.useEffect)((function(){b.get("title")&&(e.title=b.get("title")),b.get("genreId")&&(e.genreId=parseInt(b.get("genreId"),10)),b.get("upcommingReleases")&&(e.upcommingReleases=!0),b.get("inTheaters")&&(e.inTheaters=!0),b.get("page")&&(e.page=parseInt(b.get("page"),10)),y(e)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Filter Movies"}),Object(u.jsx)(U.d,{initialValues:e,onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=1,e.next=3,y(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(U.c,{children:Object(u.jsxs)("div",{className:"row gx-3 align-items-center mb-3",children:[Object(u.jsx)("div",{className:"col-auto",children:Object(u.jsx)("input",Object(ie.a)({type:"text",className:"form-control",id:"title",placeholder:"Title of the movie"},t.getFieldProps("title")))}),Object(u.jsx)("div",{className:"col-auto",children:Object(u.jsxs)("select",Object(ie.a)(Object(ie.a)({className:"form-select"},t.getFieldProps("genreId")),{},{children:[Object(u.jsx)("option",{value:"0",children:"---Choose a genre---"}),c.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name},e.id)}))]}))}),Object(u.jsx)("div",{className:"col-auto",children:Object(u.jsxs)("div",{className:"form-check",children:[Object(u.jsx)(U.b,{className:"form-check-input",id:"upcommingReleases",name:"upcommingReleases",type:"checkbox"}),Object(u.jsx)("label",{className:"form-check-label",htmlFor:"upcommingReleases",children:"Upcomming Releases"})]})}),Object(u.jsx)("div",{className:"col-auto",children:Object(u.jsxs)("div",{className:"form-check",children:[Object(u.jsx)(U.b,{className:"form-check-input",id:"inTheaters",name:"inTheaters",type:"checkbox"}),Object(u.jsx)("label",{className:"form-check-label",htmlFor:"inTheaters",children:"In Theaters"})]})}),Object(u.jsxs)("div",{className:"col-auto",children:[Object(u.jsx)(O,{className:"btn btn-primary",onClick:function(){return t.submitForm()},children:"Apply"}),Object(u.jsx)(O,{className:"btn btn-danger ms-3",onClick:function(){t.setValues(e),y(e)},children:"Clear"})]})]})}),Object(u.jsx)(be,{movies:l}),Object(u.jsx)(H,{totalAmountOfPages:p,currentPage:t.values.page,onChange:function(e){t.values.page=e,y(t.values)}})]})}})]})}},{path:"/movies/create",component:function(){var e=Object(x.g)(),t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)([]),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)([]),b=Object(s.a)(j,2),m=b[0],h=b[1],p=Object(r.useState)(!0),O=Object(s.a)(p,2),f=O[0],y=O[1];function S(e){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(Object(v.a)().mark((function t(n){var r,c,i;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=R(n),t.next=4,N()({method:"post",url:T,data:r,headers:{"Content-Type":"multipart/form-data"}});case 4:c=t.sent,e.push("/movies/".concat(c.data)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),(i=t.t0).response&&a(i.response.data);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){N.a.get("".concat(T,"/postget")).then((function(e){d(e.data.genres),h(e.data.movieTheaters),y(!1)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Create Movie"}),Object(u.jsx)(A,{errors:c}),f?Object(u.jsx)(z,{}):Object(u.jsx)(ae,{model:{title:"",inTheaters:!1,trailer:""},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nonSelectedGenres:l,selectedGenres:[],nonSelectedMovieTheaters:m,selectedMovieTheaters:[],selectedActors:[]})]})},isAdmin:!0},{path:"/movies/edit/:id(\\d+)",component:function(){var e=Object(x.i)().id,t=Object(r.useState)(),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(x.g)(),b=Object(r.useState)([]),m=Object(s.a)(b,2),h=m[0],p=m[1];function O(e){return f.apply(this,arguments)}function f(){return(f=Object(g.a)(Object(v.a)().mark((function t(n){var r,c;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=R(n),t.next=4,N()({method:"put",url:"".concat(T,"/").concat(e),data:r,headers:{"Content-Type":"multipart/form-data"}});case 4:j.push("/movie/".concat(e)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),(c=t.t0).response&&p(c.response.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){N.a.get("".concat(T,"/PutGet/").concat(e)).then((function(e){var t={title:e.data.movie.title,inTheaters:e.data.movie.inTheaters,trailer:e.data.movie.trailer,posterURL:e.data.movie.poster,summary:e.data.movie.summary,releaseDate:new Date(e.data.movie.releaseDate)};a(t),d(e.data)}))}),[e]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Edit Movie"}),Object(u.jsx)(A,{errors:h}),c&&l?Object(u.jsx)(ae,{model:c,onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nonSelectedGenres:l.nonSelectedGenres,selectedGenres:l.selectedGenres,nonSelectedMovieTheaters:l.nonSelectedMovieTheaters,selectedMovieTheaters:l.selectedMovieTheaters,selectedActors:l.actors}):Object(u.jsx)(z,{})]})},isAdmin:!0},{path:"/movie/:id(\\d+)",component:function(){var e,t,n=Object(x.i)().id,c=Object(r.useState)(),a=Object(s.a)(c,2),i=a[0],l=a[1];return Object(r.useEffect)((function(){N.a.get("".concat(T,"/").concat(n)).then((function(e){e.data.releaseDate=new Date(e.data.releaseDate),l(e.data)}))}),[n]),i?Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:[i.title,"(",i.releaseDate.getFullYear(),")"]}),null===(e=i.genres)||void 0===e?void 0:e.map((function(e){return Object(u.jsx)(o.b,{style:{marginRight:"5px"},className:"btn btn-primary btn-sm rounded-pill",to:"/movies/filter?genreId=".concat(e.id),children:e.name},e.id)})),"| ",i.releaseDate.toDateString()," | Your vote: ",Object(u.jsx)(Ce,{maximumValue:5,selectedValue:i.averageVote,onChange:function(e){N.a.post(I,{rating:e,movieId:n}).then((function(){Y.a.fire({icon:"success",title:"Rating received"})}))}}),"| Average Vote: ",i.averageVote,Object(u.jsxs)("div",{style:{display:"flex",marginTop:"1rem"},children:[Object(u.jsx)("span",{style:{display:"inline-block",marginRight:"1rem"},children:Object(u.jsx)("img",{src:i.poster,alt:"poster",style:{width:"225px",height:"315px"}})}),i.trailer?Object(u.jsx)("div",{children:Object(u.jsx)("iframe",{src:function(e){if(!e)return"";var t=e.split("v=")[1],n=t.indexOf("&");return-1!==n&&(t=t.substring(0,n)),"https://www.youtube.com/embed/".concat(t)}(i.trailer),title:"youtube-trailer",width:560,height:"315",allow:"accelermeter; autoplay;encrypted-media;gyroscope;picture-in-picture"})}):null]}),i.summary?Object(u.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(u.jsx)("h3",{children:"Summary"}),Object(u.jsx)("div",{children:Object(u.jsx)(V.a,{children:i.summary})})]}):null,i.actors&&i.actors.length>0?Object(u.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(u.jsx)("h3",{children:"Actors"}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:null===(t=i.actors)||void 0===t?void 0:t.map((function(e){return Object(u.jsxs)("div",{style:{marginBottom:"2px"},children:[Object(u.jsx)("img",{src:e.picture,alt:"pic",style:{width:"15px",verticalAlign:"middle"}}),Object(u.jsx)("span",{style:{display:"inline-block",width:"200px",marginLeft:"1rem"},children:e.name}),Object(u.jsx)("span",{style:{display:"inline-block",width:"45px"},children:"..."}),Object(u.jsx)("span",{children:e.character})]},e.id)}))})]}):null,i.movieTheaters&&i.movieTheaters.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Showing on"}),Object(u.jsx)(Se,{coordinates:null!==i&&void 0!==i&&i.movieTheaters?i.movieTheaters.map((function(e){return{lat:e.latitude,lng:e.longitude,name:e.name}})):[],readOnly:!0})]}):null]}):Object(u.jsx)(z,{})}},{path:"/register",component:function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(l).update,i=Object(x.g)();function o(e){return d.apply(this,arguments)}function d(){return(d=Object(g.a)(Object(v.a)().mark((function e(t){var n;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c([]),e.next=4,N.a.post("".concat(F,"/create"),t);case 4:m(e.sent.data),a(h()),i.push("/login"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),(n=e.t0).response&&c(n.response.data);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Register"}),Object(u.jsx)(A,{errors:n}),Object(u.jsx)(Q,{model:{email:"",password:""},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}},{path:"/login",component:function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(l).update,i=Object(x.g)();function o(e){return d.apply(this,arguments)}function d(){return(d=Object(g.a)(Object(v.a)().mark((function e(t){var n;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c([]),e.next=4,N.a.post("".concat(F,"/login"),t);case 4:m(e.sent.data),a(h()),i.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),(n=e.t0).response&&c(n.response.data);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Login"}),Object(u.jsx)(A,{errors:n}),Object(u.jsx)(Q,{model:{email:"",password:""},onSubmit:function(){var e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}},{path:"/users",component:function(){function e(){return(e=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(F,"/makeAdmin"),t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(g.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(F,"/removeAdmin"),t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(e,t){return r.apply(this,arguments)}function r(){return(r=Object(g.a)(Object(v.a)().mark((function e(t,n){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post(t,JSON.stringify(n),{headers:{"Content-Type":"application/json"}});case 2:Y.a.fire({title:"Success",text:"Operation finished correctly",icon:"success"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)(Z,{title:"Users",url:"".concat(F,"/listUsers"),children:function(n){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"Email"})]})}),Object(u.jsx)("tbody",{children:null===n||void 0===n?void 0:n.map((function(n){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[Object(u.jsx)(O,{onClick:function(){return K((function(){return function(t){return e.apply(this,arguments)}(n.id)}),"Do you wish to make ".concat(n.email," an admin?"),"Do it")},children:"Make Admin"}),Object(u.jsx)(O,{className:"btn btn-danger ms-2",onClick:function(){return K((function(){return function(e){return t.apply(this,arguments)}(n.id)}),"Do you wish to remove ".concat(n.email," as an admin?"),"Do it")},children:"Remove Admin"})]}),Object(u.jsx)("td",{children:n.email})]},n.id)}))})]})}})},isAdmin:!0},{path:"/",component:function(){var e=Object(r.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1];function a(){N.a.get(T).then((function(e){c(e.data)}))}return Object(r.useEffect)((function(){a()}),[]),Object(u.jsxs)(le.Provider,{value:function(){a()},children:[Object(u.jsx)("h3",{children:"In Theaters"}),Object(u.jsx)(be,{movies:n.inTheaters}),Object(u.jsx)("h3",{children:"Upcoming Releases"}),Object(u.jsx)(be,{movies:n.upcommingReleases})]})},exact:!0},{path:"*",component:function(){return Object(u.jsx)(x.a,{to:{pathname:"/"}})}}],Ae=Ie;(function(){M.a(M.d,"firstLetterUppercase",(function(){return this.test("first-letter-uppercase","First letter must be uppercase",(function(e){if(e&&e.length>0){var t=e.substring(0,1);return t===t.toUpperCase()}return!0}))}))})(),N.a.interceptors.request.use((function(e){var t=localStorage.getItem(j);return t&&(e.headers.Authorization="bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var Pe=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){c(h())}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(o.a,{children:Object(u.jsxs)(l.Provider,{value:{claims:n,update:c},children:[Object(u.jsx)(f,{}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(x.d,{children:Ae.map((function(e){return Object(u.jsx)(x.b,{path:e.path,exact:e.exact,children:!e.isAdmin||n.findIndex((function(e){return"role"===e.name&&"admin"===e.value}))>-1?Object(u.jsx)(e.component,{}):Object(u.jsx)(u.Fragment,{children:"You are not allowed to see this page"})},e.path)}))})}),Object(u.jsx)("footer",{className:"db-footer py-5 mt-5 bg-light",children:Object(u.jsx)("div",{className:"container",children:"Develop by Khuong Nguyen"})})]})})})},Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,322)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},De=(n(308),n(48)),Ue=n(150);De.b.add(Ue.a),i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Pe,{})}),document.getElementById("root")),Re()}},[[309,1,2]]]);